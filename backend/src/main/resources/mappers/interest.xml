<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.vue.mapper.InterestMapMapper">

	<insert id="insertInterest" parameterType="RegionDto">
		insert into userinterest(userId, sidoCode, sigugunCode,dongCode,areaName) values (#{userId}, #{sidoCode},#{sigugunCode}, #{dongCode}, #{areaName})
	</insert>

	
	<delete id="deleteInterest" parameterType="int">
		delete from userinterest
		where interestId = #{interestId}
	</delete>
	
	<select id="searchByUserID" parameterType="string" resultType="RegionDto">
		select * from userinterest
		where userId = #{userId}
	</select>
	
	<select id="popularList" resultType="RegionDto">
		select interestId, userId, sidoCode, sigugunCode, dongCode, areaName, count(areaName) as interestCount
		from userinterest
		group by areaName
		order by interestCount desc
		limit 5
	</select>
	
	<select id="selectByIdAndDongCode" parameterType="string" resultType="RegionDto">
		select * from userinterest
		where userId = #{userId} and dongCode= #{dongCode}
	</select>
</mapper>